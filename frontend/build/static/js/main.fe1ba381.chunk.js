(this["webpackJsonpfile-store"]=this["webpackJsonpfile-store"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),c=a.n(s),i=a(14),o=(a(71),a(19)),l=a(9),u=a(8),d=a.n(u),j=a(13),b=a(24),p=a(25),h=a(122),m=a(121),x=a(57),f=a.n(x),O=a(36);a(75);f.a.config(),O.a.initializeApp({apiKey:"AIzaSyDFBQ7N7jF-60Wp2sASnGr9n_50iaxJxaY",authDomain:"file-store-e61e5.firebaseapp.com",projectId:"file-store-e61e5",storageBucket:"file-store-e61e5.appspot.com",messagingSenderId:"381634634585",appId:"1:381634634585:web:cb5dd4b06376f75abee248"});var g,v=O.a.auth(),w=new O.a.auth.GoogleAuthProvider,y=a(123),k=a(1),C=function(e){var t=e.isAuth,a=e.changeHandler,n=(e.isVerified,e.uploading),r=Object(l.g)();return Object(k.jsxs)(y.a,{bg:"dark",variant:"dark",children:[Object(k.jsx)(y.a.Brand,{href:"#home",children:"File-Store"}),Object(k.jsxs)("div",{style:{marginLeft:"auto"},children:[t&&Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(m.a,{style:{height:"2.4rem",marginRight:"0.5rem"},variant:"light",disabled:n,children:[Object(k.jsx)("label",{htmlFor:"files",children:n?"Uploading":"Upload"}),Object(k.jsx)("input",{id:"files",style:{display:"none",visibility:"none"},type:"file",name:"file",onChange:function(e){e.preventDefault(),a(e)},disabled:n})]})}),t&&Object(k.jsx)(m.a,{style:{marginLeft:"0.5rem"},variant:"light",onClick:function(){v.signOut().then((function(){alert("Logout made successfully"),r.push("/login")})).catch((function(e){alert("Unable to Logout")}))},children:"Logout"})]})]})},S=a(10),I=a.n(S),N="https://strawberry-pie-45032.herokuapp.com",D=function(){var e=Object(l.g)(),t=Object(n.useState)({email:"",password:""}),a=Object(i.a)(t,2),r=a[0],s=a[1],c=function(e){s(Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(C,{isAuth:!1}),Object(k.jsx)("div",{style:{padding:"60px 0"},children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(h.a,{style:{margin:"0 auto",maxWidth:"320px"},onSubmit:function(t){t.preventDefault(),v.signInWithEmailAndPassword(r.email,r.password).then(function(){var t=Object(j.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){alert(e.message)}))},children:[Object(k.jsx)("h2",{className:"text-center",children:"Login"}),Object(k.jsx)("br",{}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"email",children:[Object(k.jsx)(h.a.Label,{children:"Email"}),Object(k.jsx)(h.a.Control,{name:"email",type:"email",className:"form-control","aria-describedby":"emailHelp",placeholder:"Enter your name",value:r.email,onChange:c,required:!0})]}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"password",children:[Object(k.jsx)(h.a.Label,{children:"Password"}),Object(k.jsx)(h.a.Control,{type:"password",name:"password",className:"form-control",placeholder:"Enter Password",value:r.password,onChange:c,required:!0})]}),Object(k.jsx)(m.a,{block:!0,size:"lg",type:"submit",className:"btn btn-primary",children:"Login"}),Object(k.jsxs)("div",{style:{textAlign:"center"},children:[Object(k.jsx)(o.b,{to:"/forgotpassword",children:"Forgot Password"})," "]}),Object(k.jsxs)("div",{style:{textAlign:"center"},children:["Dont have an account ",Object(k.jsx)(o.b,{to:"/signup",children:"SignUp"})," "]}),Object(k.jsx)("br",{}),Object(k.jsx)("div",{style:{textAlign:"center"},children:"Or Login With"}),Object(k.jsx)("br",{}),Object(k.jsx)(m.a,{block:!0,size:"lg",onClick:function(t){t.preventDefault(),v.signInWithPopup(w).then(function(){var t=Object(j.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.post("".concat(N,"/checkuser"),{name:a.user.displayName,email:a.user.email});case 3:t.next=11;break;case 5:if(t.prev=5,t.t0=t.catch(0),console.log(t.t0.response),"No account with the given emailId exists"!==(null===(n=t.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.data)){t.next=11;break}return t.next=11,I.a.post("".concat(N,"/register"),{name:a.user.displayName,email:a.user.email});case 11:e.push("/");case 12:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},className:"btn btn-danger",children:"Sign In with Google"})]})})})]})},P=a(61),A=(a(100),a(37)),L=(a(56),a(45)),E=a.n(L),F=function(e){e?I.a.defaults.headers.common["bearer-token"]=e:delete I.a.defaults.headers.common["bearer-token"]},z=function(e){var t=33e5,a=function(){var e=Object(j.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=v.currentUser)||void 0===n?void 0:n.getIdToken(!0);case 2:r=e.sent,t=33e5,F(r),setTimeout(a,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();setTimeout(a,t)},U=a(62),B=a.n(U),G=a(124),W=function(e){var t=e.filename,a=e.userData,n=e.updateUserData,r=function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(N,"/download/").concat(a.ID,"/").concat(t));case 3:n=e.sent,I.a.get(n.data.url,{responseType:"blob"}).then((function(e){B()(e.data,t)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.data),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.delete("".concat(N,"/").concat(a.ID,"/").concat(t));case 3:I.a.get("".concat(N,"/home")).then((function(e){n(e.data)})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.data),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsxs)(G.a,{style:{width:"20rem"},children:[Object(k.jsx)(G.a.Img,{variant:"top",src:"https://picsum.photos/200",alt:"hi"}),Object(k.jsxs)(G.a.Body,{children:[Object(k.jsx)(G.a.Title,{children:t}),Object(k.jsx)(m.a,{style:{margin:"0.2rem"},variant:"primary",onClick:s,children:"Delete"}),Object(k.jsx)(m.a,{style:{margin:"0.2rem"},variant:"primary",onClick:r,children:"Download"})]})]}),Object(k.jsx)("br",{})]})},q=a(63),T=a(125),R=q.a.div(g||(g=Object(P.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n    flex-wrap:wrap;\n\tfont-size: 1.5rem;\n\tjustify-content: space-evenly;\n\talign-items: center;\n\tbackground-color: white;\n\tfont-family: Raleway, sans-serif;\n\tpadding: 1em;\n"]))),V=function(){return Object(k.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:["Uploading \xa0",Object(k.jsx)(E.a,{type:"ThreeDots",color:"#00BFFF",height:30,width:30})]})};var H=function(){var e=Object(l.g)(),t=r.a.useRef(null),a=Object(n.useState)(!0),s=Object(i.a)(a,2),c=s[0],o=s[1],u=Object(n.useState)(null),b=Object(i.a)(u,2),p=b[0],h=b[1],m=Object(n.useState)(!1),x=Object(i.a)(m,2),f=x[0],O=x[1],g=Object(n.useState)(!1),w=Object(i.a)(g,2),y=w[0],S=w[1],D=Object(n.useState)(),P=Object(i.a)(D,2),L=P[0],U=P[1],B=function(){var e=Object(j.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==a.target.files[0]){e.next=2;break}return e.abrupt("return");case 2:if(!(a.target.files[0].size>1e7)){e.next=5;break}return alert("Pls select a File less than 10MB"),e.abrupt("return");case 5:if((n=new FormData).append("file",a.target.files[0]),!p.files.includes(a.target.files[0].name)){e.next=10;break}return alert("a file with the given name already exists"),e.abrupt("return");case 10:return e.prev=10,O(!0),t.current=Object(A.b)(Object(k.jsx)(V,{})),e.next=15,I.a.get("".concat(N,"/upload/").concat(p.ID,"/").concat(a.target.files[0].name));case 15:return r=e.sent,e.next=18,I.a.put(r.data.url,n);case 18:A.b.dismiss(t.current),O(!1),I.a.get("".concat(N,"/home")).then((function(e){h(e.data)})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(10),alert(e.t0.response.data.data),console.log(e.t0.response);case 27:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var t=!1;return t||v.onAuthStateChanged(function(){var t=Object(j.a)(d.a.mark((function t(a){var n,r,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=a){t.next=4;break}e.push("/login"),t.next=24;break;case 4:return t.next=6,v.currentUser.getIdToken(!0);case 6:return n=t.sent,F(n),z(),S(!0),t.prev=10,t.next=13,I.a.get("".concat(N,"/home"));case 13:r=t.sent,h(r.data),U(v.currentUser.emailVerified),o(!1),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(10),alert(null===(s=t.t0.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.data),console.log(t.t0.response),e.push("/login");case 24:case"end":return t.stop()}}),t,null,[[10,19]])})));return function(e){return t.apply(this,arguments)}}()),function(){t=!0}}),[]);var G=function(e){h(e)};return Object(k.jsx)("div",{children:c?Object(k.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:Object(k.jsx)(E.a,{type:"Puff",color:"#00BFFF",height:100,width:100})}):Object(k.jsxs)("div",{children:[Object(k.jsx)(C,{isAuth:y,changeHandler:B,isVerified:L,uploading:f}),Object(k.jsx)("div",{children:L?Object(k.jsxs)(R,{children:[!(null===p||void 0===p?void 0:p.files.length)&&Object(k.jsx)(T.a,{variant:"primary",children:"No files uploaded till now"}),null!==p&&p.files.slice(0).reverse().map((function(e){return Object(k.jsx)(W,{filename:e,userData:p,updateUserData:G},e)}))]}):Object(k.jsx)(T.a,{variant:"danger",children:"Pls Verify Email before uploading"})}),Object(k.jsx)(A.a,{position:"bottom-right",autoClose:!1,hideProgressBar:!0,draggable:!0})]})})},J=function(){var e=Object(l.g)(),t=Object(n.useState)({email:"",password:"",confirmPassword:"",username:""}),a=Object(i.a)(t,2),r=a[0],s=a[1],c=function(e){s(Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e.target.name,e.target.value)))},u=function(){var t=Object(j.a)(d.a.mark((function t(a){var n,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r.password!==r.confirmPassword){t.next=15;break}return a.preventDefault(),t.prev=3,t.next=6,I.a.post("".concat(N,"/register"),{name:r.username,email:r.email});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),alert(null===(n=t.t0.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data),t.abrupt("return");case 12:v.createUserWithEmailAndPassword(r.email,r.password).then(function(){var t=Object(j.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(n=v.currentUser)||void 0===n||n.sendEmailVerification(),e.push("/");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){alert(e.message)})),t.next=16;break;case 15:alert("Passwords do not match");case 16:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(C,{isAuth:!1}),Object(k.jsx)("div",{style:{padding:"60px 0"},children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(h.a,{style:{margin:"0 auto",maxWidth:"320px"},onSubmit:u,children:[Object(k.jsx)("h2",{className:"text-center",children:"Sign Up"}),Object(k.jsx)("br",{}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"email",children:[Object(k.jsx)(h.a.Label,{children:"Display Name"}),Object(k.jsx)(h.a.Control,{name:"username",type:"text",placeholder:"Enter your name",className:"form-control",value:r.username,onChange:c,required:!0}),Object(k.jsx)("br",{}),Object(k.jsx)(h.a.Label,{children:"Email"}),Object(k.jsx)(h.a.Control,{name:"email",type:"email",placeholder:"Enter your Email",className:"form-control","aria-describedby":"emailHelp",value:r.email,onChange:c,required:!0})]}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"password",children:[Object(k.jsx)(h.a.Label,{children:"Password"}),Object(k.jsx)(h.a.Control,{type:"password",name:"password",className:"form-control",placeholder:"Choose a Password",minLength:"6",value:r.password,onChange:c,required:!0})]}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"password",children:[Object(k.jsx)(h.a.Label,{children:"Confirm Password"}),Object(k.jsx)(h.a.Control,{type:"password",name:"confirmPassword",className:"form-control",placeholder:"Confirm your Password",minLength:"6",value:r.confirmPassword,onChange:c,required:!0})]}),Object(k.jsx)(m.a,{block:!0,size:"lg",type:"submit",className:"btn btn-primary",children:"Login"}),Object(k.jsxs)("div",{style:{textAlign:"center"},children:["Already have an account ",Object(k.jsx)(o.b,{to:"/login",children:"SignIn"})," "]})]})})})]})},M=function(){var e=Object(l.g)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(C,{isAuth:!1}),Object(k.jsx)("div",{style:{padding:"60px 0"},children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(h.a,{style:{margin:"0 auto",maxWidth:"320px"},onSubmit:function(t){t.preventDefault(),v.sendPasswordResetEmail(r).then((function(){alert("If an account with the given email exits,a reset link has been sent to it"),e.push("/")})).catch((function(){alert("Error resetting password")}))},children:[Object(k.jsx)("h2",{className:"text-center",children:"Reset Password"}),Object(k.jsx)("br",{}),Object(k.jsxs)(h.a.Group,{size:"lg",controlId:"email",children:[Object(k.jsx)(h.a.Label,{children:"Email"}),Object(k.jsx)(h.a.Control,{name:"email",type:"email",className:"form-control",placeholder:"Enter email to which link will be sent",value:r,onChange:function(e){s(e.target.value)},required:!0})]}),Object(k.jsx)(m.a,{block:!0,size:"lg",type:"submit",className:"btn btn-primary",children:"Submit"})]})})})]})};var K=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1];return v.onAuthStateChanged((function(e){r(null!=e)})),Object(k.jsx)(o.a,{children:Object(k.jsxs)(l.d,{children:[Object(k.jsx)(l.b,{path:"/login",children:a?Object(k.jsx)(l.a,{to:"/"}):Object(k.jsx)(D,{})}),Object(k.jsx)(l.b,{path:"/signup",children:a?Object(k.jsx)(l.a,{to:"/"}):Object(k.jsx)(J,{})}),Object(k.jsx)(l.b,{path:"/forgotpassword",children:a?Object(k.jsx)(l.a,{to:"/"}):Object(k.jsx)(M,{})}),Object(k.jsx)(l.b,{path:"/",children:Object(k.jsx)(H,{})})]})})};c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(K,{})}),document.getElementById("root"))},71:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.fe1ba381.chunk.js.map